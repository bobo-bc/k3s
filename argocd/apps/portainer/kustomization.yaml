apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Namespace for Portainer
namespace: portainer

# Resources to apply
resources:
  - namespace.yaml
  - storageclass-iscsi.yaml
  - pvc.yaml
  - deployment.yaml
  - service.yaml
  - middleware.yaml
  - ingress.yaml

# Common labels to identify the app
commonLabels:
  app: portainer
  app.kubernetes.io/name: portainer
  app.kubernetes.io/part-of: homelab

# Optional: name prefix for resources (good for avoiding collisions)
namePrefix: portainer-

# Optional: images override (useful for upgrades in ArgoCD without editing YAML)
images:
  - name: portainer/portainer-ce
    newTag: 2.21.0 # change version as needed

# Optional: annotations (could help with GitOps tracking or cert-manager hints)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "1"
  argocd.argoproj.io/compare-options: IgnoreExtraneous
